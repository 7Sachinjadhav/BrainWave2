<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2nd Round: Debugging | Brain Wave</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white flex items-center justify-center h-screen">
  <div class="text-center max-w-xl px-6">
    <h1 class="text-4xl font-bold mb-4">üêû 2nd Round: Debugging</h1>
    <h2 class="text-2xl font-semibold mb-2">Welcome, <span id="teamNameDisplay" class="text-yellow-400"></span></h2>
    <p class="text-lg mb-6 text-red-400 font-semibold">
      ‚ö†Ô∏è Only selected teams will move to the next round. Please wait for the admin to unlock it.
    </p>
    <p class="text-md text-gray-300">
      üß† This round focuses on identifying and fixing bugs in code. You'll need sharp eyes and logical thinking to spot errors and correct them efficiently.
    </p>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script>
    document.getElementById("teamNameDisplay").textContent =
      localStorage.getItem("teamName") || "Team";

    // ‚úÖ Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyA3n0_IA5j8rof7-zYqTHAgwhuqLQ61xL8",
      authDomain: "brainwave-337b3.firebaseapp.com",
      databaseURL: "https://brainwave-337b3-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "brainwave-337b3",
      storageBucket: "brainwave-337b3.appspot.com",
      messagingSenderId: "18955419464",
      appId: "1:18955419464:web:5fe45bd80e1674703b7d7d"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // üîë Listen for round unlocks
    db.ref("rounds").on("value", snapshot => {
      const rounds = snapshot.val();
      if (!rounds) return;

      if (rounds.round2?.status === "open") {
        localStorage.setItem("round", "2");
        window.location.href = "round2-debug.html"; // ‚úÖ redirect when unlocked
      } else if (rounds.round3?.status === "open") {
        localStorage.setItem("round", "3");
        window.location.href = "round3.html";
      }
    });
  </script>
</body>
</html>
